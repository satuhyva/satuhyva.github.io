<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Satu Hyv√§rinen Contact Me</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto Condensed' rel='stylesheet'>
    <link rel="stylesheet" href="../styles/general.css">
    <link rel="stylesheet" href="../styles/contactMe.css">

  </head>
  <body>

    <p class="navigation_links">
      <a class="navigation_link" href="../index.html">HOME</a>
      <span class="slash_between">/</span>
      <a class="navigation_link" href="./resume.html">RESUME</a>
      <span class="slash_between">/</span>
      <a class="navigation_link" href="./hobbyProjects.html">PROJECTS</a>
      <span class="slash_between">/</span>
      <a class="navigation_link" href="./personalInfo.html">PERSONAL</a>
      <span class="slash_between">/</span>
      <a class="is_selected_navigation_link" href="./contactMe.html">CONTACT</a>
    </p>

    <h1 class="title_smaller">CONTACT ME</h1>
    <br>
    <div class="centered_container">
      <div  class="centered_column">
        <div class="form-control">
          <input id="nameInput" type="text" required/>
          <label class="label_text">Name</label>
        </div>

        <div class="form-control">
          <input id="emailInput" type="text" required/>
          <label class="label_text">Email</label>
        </div>

        <div class="form-control">
          <textarea id="messageInput" rows="10"  required></textarea>
          <label class="label_text">Message</label>
        </div>

        <br>
        <div  class="recaptcha-wrap">
          <div class="g-recaptcha" data-sitekey="6LfqvJwcAAAAAO_QjgdUHA14GdU5DUYfZ7TNoQrA" data-callback="verifyCaptcha"></div>
          <div id="g-recaptcha-error"></div>
        </div>
        <br>
        <button type="button" name="button" onclick="submitContactMessage()">SUBMIT</button>
      </div>
    </div>




    <script type="text/javascript">
      let labels = document.querySelectorAll('.form-control label')
      labels.forEach(labelItem => {
      labelItem.innerHTML = labelItem.innerText
        .split('')
        .map((letter, idx) => `<span style="
            transition-delay: ${idx * 50}ms
          ">${letter}</span>`)
        .join('');
      })
    </script>

    <!-- <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script> -->

<!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.11.8/sweetalert2.min.js"></script> -->

<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <!-- <input id="loginEmail" type="text" name="email" placeholder="Email">
    <input id="loginPassword" type="password" name="password" placeholder="Password"> -->


    <script src='https://www.google.com/recaptcha/api.js' async defer></script>

    <script type="text/javascript">
      var recaptcha_response = ''

      function submitContactMessage() {
        const visitorName = document.getElementById('nameInput').value
        const visitorEmail = document.getElementById('emailInput').value
        const visitorMessage = document.getElementById('messageInput').value
        if (!visitorName || !visitorEmail || !visitorMessage) {
          swal({
            title: "Hmmmm...",
            text: "Some fields are still empty. \nPlease fill them out.",
            icon: "error",
            button: "Got it!"
          })
          return
        }

        if(recaptcha_response.length == 0) {
          swal({
            title: "Hmmmm...",
            text: "Are you a robot?",
            icon: "error",
            button: "Let me try again"
          })
        }

        const http = new XMLHttpRequest()
        let url = 'https://personal-site-server-satu.herokuapp.com/health'
        // let url = 'http://localhost:3001/contactMessage'
        url += `?name=${visitorName}&email=${visitorEmail}&message=${visitorMessage}`
        http.open('POST', url)
        http.setRequestHeader('Content-type', 'application/json')
        http.send()
        http.onload = function() {
          if (http.responseText === "OK")
              swal({
                title: "Thanks!",
                text: "Your message was successfully sent.",
                button: "OK"
              })
        }

      }

      function verifyCaptcha(token) {
          recaptcha_response = token
          document.getElementById('g-recaptcha-error').innerHTML = ''
      }
    </script>
  </body>
</html>
